{"version":3,"sources":["components/ProtectedRoute.js","utils/auth.js","contexts/CurrentUserContext.js","images/header-logo.svg","components/Header.js","components/Card.js","components/Loader.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","utils/constants.js","hooks/useFormWithValidation.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/ConfirmPopup.js","utils/api.js","images/profile-avatar.jpg","utils/cards-init.js","images/photo-grid-peterhof-4.jpg","images/photo-grid-peterhof-3.jpg","images/photo-grid-peterhof-1.jpg","images/photo-grid-oranienbaum-1.jpg","images/photo-grid-aleksandria.jpg","images/photo-grid-peterhof.jpg","screens/HomePage.js","screens/Login.js","screens/Register.js","screens/NotFound.js","components/InfoTooltip.js","images/reg-success.svg","images/reg-failure.svg","components/App.js","index.js"],"names":["ProtectedRoute","Component","component","props","loggedIn","to","BASE_URL","handleResponse","res","ok","json","Promise","reject","status","CurrentUserContext","React","createContext","Header","className","src","headerLogo","alt","children","Card","card","onClick","onLike","onDelete","currentUser","useContext","isOwned","owner","_id","link","title","likes","length","disabled","hidden","Loader","Main","onEditAvatar","avatar","name","onEditProfile","about","onAddPlace","isLoading","cards","map","onCardClick","onCardLike","onCardDelete","id","Footer","PopupWithForm","openClass","isOpen","handleCloseClick","onClose","handleEscPress","useCallback","evt","key","useEffect","document","addEventListener","removeEventListener","target","currentTarget","type","size","onSubmit","value","submitDisabled","submitName","popupInputClass","useFormWithValidation","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","newValues","newErrors","newIsValid","handleChange","event","closest","checkValidity","handleInput","validity","validationMessage","valid","EditProfilePopup","info","e","preventDefault","onUpdateUser","maxLength","minLength","placeholder","required","onChange","onInput","EditAvatarPopup","onUpdateAvatar","pattern","AddPlacePopup","ImagePopup","popupOpenClass","setPopupOpenClass","ConfirmPopup","onConfirm","api","baseUrl","headers","this","_baseUrl","_headers","fetch","method","then","_handleResponse","item","body","JSON","stringify","data","cardId","authorization","initialCards","HomePage","profileAvatar","setCurrentUser","setCards","selectedCard","setSelectedCard","deletedCard","setDeletedCard","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","profileSubmitName","setProfileSubmitName","avatarSubmitName","setAvatarSubmitName","addPlaceSubmitName","setAddPlaceSubmitName","deleteCardSubmitName","setDeleteCardSubmitName","setIsLoading","all","getUserInfo","getInitialCards","userData","cardsData","catch","error","console","log","finally","Provider","email","onLogout","isLiked","some","likeAuthor","likeAction","unlikeCard","likeCard","changedCard","newCards","currentCard","err","patchUserProfile","newAvatarLink","patchNewAvatar","newPlace","postNewCard","newCard","deleteCard","filter","Login","setEmail","password","setPassword","onLogin","Register","onRegister","NotFound","InfoToolTip","imageLink","textMessage","App","setLoggedIn","isPopupOpen","setIsPopupOpen","image","text","resultMessage","setResultMessage","history","useHistory","tokenCheck","localStorage","getItem","jwt","token","push","Fragment","path","removeItem","userEmail","userPassword","resetLoginForm","auth","setItem","messageText","regFailure","resetRegisterForm","regSuccess","exact","InfoTooltip","ReactDOM","render","StrictMode","getElementById"],"mappings":"+OAYeA,EATQ,SAAC,GAAyC,IAA5BC,EAA2B,EAAtCC,UAAyBC,EAAa,6BAC9D,OACE,cAAC,IAAD,UAEI,kBAAMA,EAAMC,SAAW,cAACH,EAAD,eAAeE,IAAY,cAAC,IAAD,CAAUE,GAAG,iBCP1DC,EAAW,gCAEXC,EAAiB,SAACC,GAC7B,OAAIA,EAAIC,GAAWD,EAAIE,OAChBC,QAAQC,OAAOJ,EAAIK,S,QCFfC,EAAqBC,IAAMC,gBCFzB,MAA0B,wCCkB1BC,EAfA,SAACd,GAAD,OAEb,yBAAQe,UAAU,SAAlB,UAEE,qBAAKA,UAAU,eAAeC,IAAKC,EACjCC,IAAI,uGAEN,qBAAKH,UAAU,WAAf,SACGf,EAAMmB,eC4CEC,MApDf,YAAoD,IAApCC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,SAC/BC,EAAcC,qBAAWf,GACzBgB,EAAUN,EAAKO,QAAUH,EAAYI,IAc3C,OACE,qBAAId,UAAU,OAAd,UACE,qBACEA,UAAU,cACVC,IAAKK,EAAKS,KACVZ,IAAKG,EAAKU,MACVT,QAlBc,WAClBA,EAAQD,MAmBN,sBAAKN,UAAU,oBAAf,UACE,oBAAIA,UAAU,cAAd,SAA6BM,EAAKU,QAClC,sBAAKhB,UAAU,mBAAf,UACE,wBACEA,UAAS,iEAELM,EAAKW,MAAMC,OAAS,EAAK,oBAAsB,IAEnDX,QAxBS,WACjBC,EAAOF,IAwBCU,MAAM,qDAER,sBAAMhB,UAAU,iBAAhB,SACGM,EAAKW,MAAMC,eAKlB,wBACElB,UAAU,wCACVmB,UAAWP,EAASQ,QAASR,EAC7BL,QAhCe,WACnBE,EAASH,IAgCLU,MAAM,mDCxCCK,EANA,WACb,OACE,qBAAKrB,UAAU,YCuDJsB,MAtDf,SAAcrC,GACZ,IAAMyB,EAAcC,qBAAWf,GAE/B,OACE,uBAAMI,UAAU,UAAhB,UACE,0BAASA,UAAU,UAAnB,UAEE,qBAAKA,UAAU,kBAAkBO,QAAStB,EAAMsC,aAAhD,SACE,qBACEtB,IAAKS,EAAYc,OACjBxB,UAAU,iBACVG,IAAI,kFACJa,MAAM,uIAIV,sBAAKhB,UAAU,uBAAf,UACE,oBAAIA,UAAU,gBAAd,SACGU,EAAYe,OAEf,wBACEzB,UAAU,+CACVgB,MAAM,4HACNT,QAAStB,EAAMyC,gBAEjB,mBAAG1B,UAAU,gBAAb,SAA8BU,EAAYiB,WAG5C,wBACE3B,UAAU,8CACVO,QAAStB,EAAM2C,WACfZ,MAAM,qHAIV,yBAAShB,UAAU,aAAnB,SACEf,EAAM4C,UACJ,cAAC,EAAD,IACA,oBAAI7B,UAAU,mBAAd,SACGf,EAAM6C,MAAMC,KAAI,SAACzB,GAAD,OACf,cAAC,EAAD,CACEA,KAAMA,EACNC,QAAStB,EAAM+C,YACfxB,OAAQvB,EAAMgD,WACdxB,SAAUxB,EAAMiD,cAJP5B,EAAK6B,eCrCfC,EANA,kBACb,wBAAQpC,UAAU,SAAlB,SACE,mBAAGA,UAAU,oBAAb,uCC0DWqC,MA5Df,SAAuBpD,GACrB,IAAMqD,EAAYrD,EAAMsD,QAAU,eAE5BC,EAAmBvD,EAAMwD,QAEzBC,EAAiBC,uBAAY,SAACC,GAClB,WAAZA,EAAIC,KAAkBL,MACzB,CAACA,IAcJ,OAZAM,qBAAU,WACJ7D,EAAMsD,OACRQ,SAASC,iBAAiB,QAASN,GAEnCK,SAASE,oBAAoB,QAASP,KAEvC,CAACzD,EAAMsD,OAAQG,IAOhB,qBACE1C,UAAS,8BAAyBf,EAAMwC,KAA/B,YAAuCa,GAChD/B,QAPuB,SAACqC,GACtBA,EAAIM,SAAWN,EAAIO,eAAeX,KAItC,SAIA,sBAAKxC,UAAU,mBAAf,UAEE,wBACEoD,KAAK,SACLpD,UAAU,4CACVgB,MAAM,iMACNT,QAASiC,IAGX,uBACEf,KAAMxC,EAAMwC,KACZzB,UAAS,uCAAkCf,EAAMoE,MACjDC,SAAUrE,EAAMqE,SAHlB,UAKI,oBAAItD,UAAU,iBAAd,SACGf,EAAM+B,QAGR/B,EAAMmB,SAEP,wBACEgD,KAAK,SAASG,MAAM,6CACpBpC,SAAUlC,EAAMuE,eAChBxD,UAAU,sCAHZ,SAKKf,EAAMwE,sBCnDRC,EACC,yBADDA,EAEJ,uB,QCFF,SAASC,IAAyB,IAAD,EACVC,mBAAS,IADC,mBAC/BC,EAD+B,KACvBC,EADuB,OAEVF,mBAAS,IAFC,mBAE/BG,EAF+B,KAEvBC,EAFuB,OAGRJ,mBAAS,IAHD,mBAG/BK,EAH+B,KAGtBC,EAHsB,KAmBhCC,EAAYxB,uBAChB,WAAyD,IAAxDyB,EAAuD,uDAA3C,GAAIC,EAAuC,uDAA3B,GAAIC,EAAuB,wDACtDR,EAAUM,GACVJ,EAAUK,GACVH,EAAWI,KAEb,CAACR,EAAWE,EAAWE,IAGzB,MAAO,CAAEL,SAAQC,YAAWS,aAvBP,SAACC,GACpB,IAAMtB,EAASsB,EAAMtB,OADS,EAERsB,EAAMtB,OAArBzB,EAFuB,EAEvBA,KAAM8B,EAFiB,EAEjBA,MACbO,EAAU,2BAAID,GAAL,kBAAcpC,EAAO8B,KAC9BW,EAAWhB,EAAOuB,QAAQ,QAAQC,kBAmBMC,YAhBtB,SAACH,GAAW,IAAD,EACsBA,EAAMtB,OAAlDzB,EADsB,EACtBA,KAAM8B,EADgB,EAChBA,MAAOqB,EADS,EACTA,SAAUC,EADD,EACCA,kBAC9Bf,EAAU,2BAAID,GAAL,kBAAcpC,EAAO8B,KAC9BW,EAAW,2BAAID,GAAL,kBAAexC,EAAOmD,EAASE,SACzCd,EAAU,2BAAID,GAAL,kBAActC,EAAOoD,MAYuBd,SAAQE,UAASE,aCoD3DY,MA1Ef,SAA0B9F,GACxB,IAAMyB,EAAcC,qBAAWf,GADA,EAK3B+D,IAFFE,EAH6B,EAG7BA,OAAQU,EAHqB,EAGrBA,aAAcI,EAHO,EAGPA,YACtBZ,EAJ6B,EAI7BA,OAAQE,EAJqB,EAIrBA,QAASE,EAJY,EAIZA,UAenB,OAZArB,qBAAU,WACRqB,IACIlF,EAAMsD,QACR4B,EAAU,CAAE1C,KAAMf,EAAYe,KAAMuD,KAAMtE,EAAYiB,OAAS,IAAI,KAEpE,CAACjB,EAAazB,EAAMsD,OAAQ4B,IAQ7B,eAAC,EAAD,CACE1C,KAAK,UAAU4B,KAAK,IACpBrC,MAAM,4HACNyC,WAAYxE,EAAMwE,WAClBD,gBAAiBS,EACjB1B,OAAQtD,EAAMsD,OACdE,QAASxD,EAAMwD,QACfa,SAbiB,SAAC2B,GACpBA,EAAEC,iBACFjG,EAAMkG,aAAa,CAAE1D,KAAMoC,EAAOpC,KAAMuD,KAAMnB,EAAOmB,QAIrD,UASE,wBAAOhF,UAAU,eAAjB,UACE,uBAAOoD,KAAK,OACVjB,GAAG,OAAOV,KAAK,OACfzB,UAAS,uEAEJ+D,EAAOtC,KAAOiC,EAA6B,GAFvC,gBAIT0B,UAAU,KAAKC,UAAU,IACzBC,YAAY,qBAAMC,UAAQ,EAC1BhC,MAAOM,EAAOpC,MAAQ,GACtB+D,SAAUjB,EACVkB,QAASd,IAEX,sBACE3E,UAAS,uBAAkB0D,GAC3BvB,GAAG,aAFL,SAIG4B,EAAOtC,MAAQ,QAIpB,wBAAOzB,UAAU,eAAjB,UACE,uBAAOoD,KAAK,OACVjB,GAAG,OAAOV,KAAK,OACfzB,UAAS,uEAEJ+D,EAAOiB,KAAOtB,EAA6B,GAFvC,gBAIT0B,UAAU,MAAMC,UAAU,IAC1BC,YAAY,kCAASC,UAAQ,EAC7BhC,MAAOM,EAAOmB,MAAQ,GACtBQ,SAAUjB,EACVkB,QAASd,IAEX,sBACE3E,UAAS,uBAAkB0D,GAC3BvB,GAAG,aAFL,SAIG4B,EAAOiB,MAAQ,YCZXU,MAvDf,SAAyBzG,GACvB,IAAMyB,EAAcC,qBAAWf,GADD,EAM1B+D,IAFFE,EAJ4B,EAI5BA,OAAQU,EAJoB,EAIpBA,aAAcI,EAJM,EAINA,YACtBZ,EAL4B,EAK5BA,OAAQE,EALoB,EAKpBA,QAASE,EALW,EAKXA,UAgBnB,OAbArB,qBAAU,WACJ7D,EAAMsD,OACR4B,EAAU,CAAE3C,OAAQd,EAAYc,QAAU,IAAI,GAE9C2C,MAED,CAACzD,EAAazB,EAAMsD,OAAQ4B,IAQ7B,cAAC,EAAD,CACE1C,KAAK,SAAS4B,KAAK,IACnBrC,MAAM,wFACNyC,WAAYxE,EAAMwE,WAClBD,gBAAiBS,EACjB1B,OAAQtD,EAAMsD,OACdE,QAASxD,EAAMwD,QACfa,SAbiB,SAAC2B,GACpBA,EAAEC,iBACFjG,EAAM0G,eAAe9B,EAAOrC,SAI5B,SASE,wBAAOxB,UAAU,eAAjB,UACE,uBAAOoD,KAAK,MACVjB,GAAG,SAASV,KAAK,SACjBmE,QAAQ,cACR5F,UAAS,yDAEL+D,EAAOvC,OAASkC,EAA6B,IAEjD4B,YAAY,qGAAqBC,UAAQ,EACzChC,MAAOM,EAAOrC,QAAU,GACxBgE,SAAUjB,EACVkB,QAASd,IAEX,sBACE3E,UAAS,wBAAmB0D,GAC5BvB,GAAG,eAFL,SAIG4B,EAAOvC,QAAU,WCuBbqE,EAxEO,SAAC5G,GAAW,IAAD,EAI3B0E,IAFFE,EAF6B,EAE7BA,OAAQU,EAFqB,EAErBA,aAAcI,EAFO,EAEPA,YACtBZ,EAH6B,EAG7BA,OAAQE,EAHqB,EAGrBA,QAASE,EAHY,EAGZA,UAGnBrB,qBAAU,WACRqB,MACC,CAAClF,EAAMsD,OAAQ4B,IAOlB,OACE,eAAC,EAAD,CACE1C,KAAK,OAAO4B,KAAK,IACjBrC,MAAM,gEACNyC,WAAYxE,EAAMwE,WAClBD,gBAAiBS,EACjB1B,OAAQtD,EAAMsD,OACdE,QAASxD,EAAMwD,QACfa,SAbiB,SAAC2B,GACpBA,EAAEC,iBACFjG,EAAM2C,WAAWiC,IAIjB,UASE,wBAAO7D,UAAU,eAAjB,UACE,uBAAOoD,KAAK,OACVjB,GAAG,QAAQV,KAAK,QAChB2D,UAAU,KAAKC,UAAU,IACzBrF,UAAS,yDAEL+D,EAAO/C,MAAQ0C,EAA6B,IAEhD4B,YAAY,mDACZC,UAAQ,EACRhC,MAAOM,EAAO7C,OAAS,GACvBwE,SAAUjB,EACVkB,QAASd,IAEX,sBACE3E,UAAS,uBAAkB0D,GAC3BvB,GAAG,cAFL,SAIG4B,EAAO/C,OAAS,QAIrB,wBAAOhB,UAAU,eAAjB,UACE,uBAAOoD,KAAK,MACVjB,GAAG,OAAOV,KAAK,OACfmE,QAAQ,cACR5F,UAAS,yDAEL+D,EAAOhD,KAAO2C,EAA6B,IAE/C4B,YAAY,qGACZC,UAAQ,EACRhC,MAAOM,EAAO9C,MAAQ,GACtByE,SAAUjB,EACVkB,QAASd,IAEX,sBACE3E,UAAS,uBAAkB0D,GAC3BvB,GAAG,aAFL,SAIG4B,EAAOhD,MAAQ,YCAX+E,MApEf,YAAwC,IAAlBxF,EAAiB,EAAjBA,KAAMmC,EAAW,EAAXA,QAAW,EACOmB,mBAAS,IADhB,mBAC9BmC,EAD8B,KACdC,EADc,KAG/BxD,EAAmB,WACvBwD,EAAkB,IAClBvD,KA4BF,OApBAK,qBAAU,WAER,IAAMJ,EAAiB,SAACE,GACN,WAAZA,EAAIC,KAAkBL,KAS5B,OALAO,SAASC,iBAAiB,QAASN,GAEnCsD,EAAkB,gBAGV,WAENjD,SAASE,oBAAoB,QAASP,MAIvC,IAGD,qBACE1C,UAAS,oCAA+B+F,GACxCxF,QA5BuB,SAACqC,GACtBA,EAAIM,SAAWN,EAAIO,eAAeX,KAyBtC,SAIE,sBACExC,UAAU,mBADZ,UAGE,wBACEoD,KAAK,SACLpD,UAAU,4CACVgB,MAAM,6HACNT,QAASiC,IAGX,yBACExC,UAAU,gBADZ,UAGE,qBACEA,UAAU,eACVC,IAAKK,EAAKS,KACVZ,IAAKG,EAAKU,QAEZ,4BACEhB,UAAU,uBADZ,SAGGM,EAAKU,iBCtCHiF,MApBf,SAAsBhH,GAOpB,OACE,cAAC,EAAD,CACEwC,KAAK,UAAU4B,KAAK,IACpBrC,MAAM,2DACNyC,WAAYxE,EAAMwE,WAClBD,gBAAgB,EAChBjB,OAAQtD,EAAMqB,KACdmC,QAASxD,EAAMwD,QACfa,SAbiB,SAAC2B,GACpBA,EAAEC,iBACFjG,EAAMiH,UAAUjH,EAAMqB,U,gBCoFX6F,EARH,I,WA/EV,cAAmC,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,oBAChCC,KAAKC,SAAWH,EAChBE,KAAKE,SAAWH,E,4DAGF/G,GACd,OAAIA,EAAIC,GAAWD,EAAIE,OAChBC,QAAQC,OAAOJ,EAAIK,U,oCAGb,IAAD,OACZ,OAAO8G,MAAM,GAAD,OAAIH,KAAKC,SAAT,aAA8B,CACxCG,OAAQ,MACRL,QAASC,KAAKE,WAEfG,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,Q,wCAGjB,IAAD,OAChB,OAAOmH,MAAM,GAAD,OAAIH,KAAKC,SAAT,UAA2B,CACrCG,OAAQ,MACRL,QAASC,KAAKE,WAEfG,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,Q,kCAGxBuH,GAAO,IAAD,OAChB,OAAOJ,MAAM,GAAD,OAAIH,KAAKC,SAAT,UAA2B,CACrCG,OAAQ,OACRL,QAASC,KAAKE,SACdM,KAAMC,KAAKC,UAAUH,KAEtBF,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,Q,qCAGrByB,GAAO,IAAD,OACnB,OAAO0F,MAAM,GAAD,OAAIH,KAAKC,SAAT,oBAAqC,CAC/CG,OAAQ,QACRL,QAASC,KAAKE,SACdM,KAAMC,KAAKC,UAAUjG,KAEtB4F,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,Q,uCAGnB2H,GAAO,IAAD,OACrB,OAAOR,MAAM,GAAD,OAAIH,KAAKC,SAAT,aAA8B,CACxCG,OAAQ,QACRL,QAASC,KAAKE,SACdM,KAAMC,KAAKC,UAAU,CAACvF,KAAMwF,EAAKxF,KAAME,MAAOsF,EAAKjC,SAEpD2B,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,Q,+BAG3B4H,GAAS,IAAD,OACf,OAAOT,MAAM,GAAD,OAAIH,KAAKC,SAAT,wBAAiCW,GAAU,CACrDR,OAAQ,MACRL,QAASC,KAAKE,WAEfG,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,Q,iCAGzB4H,GAAS,IAAD,OACjB,OAAOT,MAAM,GAAD,OAAIH,KAAKC,SAAT,wBAAiCW,GAAU,CACrDR,OAAQ,SACRL,QAASC,KAAKE,WAEfG,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,Q,iCAGzB4H,GAAS,IAAD,OACjB,OAAOT,MAAM,GAAD,OAAIH,KAAKC,SAAT,kBAA2BW,GAAU,CAC/CR,OAAQ,SACRL,QAASC,KAAKE,WAEfG,MAAK,SAAArH,GAAG,OAAI,EAAKsH,gBAAgBtH,U,KAK1B,CAAQ,CAClB8G,QAAS,8CACTC,QAAS,CACPc,cAAe,uCACf,eAAgB,sBCzFL,MAA0B,2CCU5BC,EAAe,CAC1B,CAAEpG,MAAO,mDAAYD,KCXR,IAA0B,kDDWIE,MAAO,GAAIJ,MAAO,EAAGsB,GAAI,GACpE,CAAEnB,MAAO,mDAAYD,KEZR,IAA0B,kDFYIE,MAAO,GAAIJ,MAAO,EAAGsB,GAAI,GACpE,CAAEnB,MAAO,mDAAYD,KGbR,IAA0B,kDHaIE,MAAO,GAAIJ,MAAO,EAAGsB,GAAI,GACpE,CAAEnB,MAAO,qEAAeD,KIdX,IAA0B,qDJcSE,MAAO,GAAIJ,MAAO,EAAGsB,GAAI,GACzE,CAAEnB,MAAO,8FAAoBD,KKfhB,IAA0B,mDLeaE,MAAO,GAAIJ,MAAO,EAAGsB,GAAI,GAC7E,CAAEnB,MAAO,mDAAYD,KMhBR,IAA0B,gDNgBGE,MAAO,GAAIJ,MAAO,EAAGsB,GAAI,IOuOtDkF,MAvOf,SAAkBpI,GAAQ,IAAD,EACe2E,mBAAS,CAC7C9C,IAAK,EACLW,KAAM,yDACNE,MAAO,kGACPH,OAAQ8F,IALa,mBAChB5G,EADgB,KACH6G,EADG,OAQG3D,mBAASwD,GARZ,mBAQhBtF,EARgB,KAQT0F,EARS,OASiB5D,mBAAS,MAT1B,mBAShB6D,EATgB,KASFC,EATE,OAUe9D,mBAAS,MAVxB,mBAUhB+D,EAVgB,KAUHC,EAVG,OAYmChE,oBAAS,GAZ5C,mBAYhBiE,EAZgB,KAYQC,EAZR,OAa6BlE,oBAAS,GAbtC,mBAahBmE,EAbgB,KAaKC,EAbL,OAciCpE,oBAAS,GAd1C,mBAchBqE,EAdgB,KAcOC,EAdP,OAgB2BtE,mBAAS,0DAhBpC,mBAgBhBuE,EAhBgB,KAgBGC,EAhBH,OAiByBxE,mBAAS,0DAjBlC,mBAiBhByE,EAjBgB,KAiBEC,EAjBF,QAkB6B1E,mBAAS,8CAlBtC,qBAkBhB2E,GAlBgB,MAkBIC,GAlBJ,SAmBiC5E,mBAAS,gBAnB1C,qBAmBhB6E,GAnBgB,MAmBMC,GAnBN,SAqBW9E,oBAAS,GArBpB,qBAqBhB/B,GArBgB,MAqBL8G,GArBK,MAsKvB,OA9IA7F,qBAAU,WACR6F,IAAa,GAEblJ,QAAQmJ,IAAI,CAACzC,EAAI0C,cAAe1C,EAAI2C,oBACnCnC,MAAK,YAA4B,IAAD,mBAAzBoC,EAAyB,KAAfC,EAAe,KAE/BzB,EAAe,CACbzG,IAAKiI,EAASjI,IACdW,KAAMsH,EAAStH,KACfE,MAAOoH,EAASpH,MAChBH,OAAQuH,EAASvH,SAGnBgG,EAASwB,EAAUjH,KAAI,SAAA8E,GACrB,MAAO,CACL7F,MAAO6F,EAAKpF,KACZV,KAAM8F,EAAK9F,KACXE,MAAO4F,EAAK5F,MACZJ,MAAOgG,EAAKhG,MAAMC,IAClBqB,GAAI0E,EAAK/F,YAIdmI,OAAM,SAACC,GACNC,QAAQC,IAAR,sIAAuCF,EAAvC,SAEDG,SAAQ,WACPV,IAAa,QAEd,IAkHD,cAAC/I,EAAmB0J,SAApB,CAA6B/F,MAAO7C,EAApC,SACE,sBAAKV,UAAU,OAAf,UACE,eAAC,EAAD,WACE,mBAAGA,UAAU,2CAAb,SACGf,EAAMsK,QAET,mBAAGvJ,UAAU,iBAAiBO,QAAStB,EAAMuK,SAA7C,+CAIF,cAAC,EAAD,CACE9H,cAAe,kBAAMoG,GAAwB,IAC7ClG,WAAY,kBAAMoG,GAAqB,IACvCzG,aAAc,kBAAM2G,GAAuB,IAC3ClG,YAAa,SAAC1B,GAAD,OAAUoH,EAAgBpH,IACvC2B,WA9Fe,SAAC3B,GACtB,IAAMmJ,EAAWnJ,EAAKW,MAAMyI,MAC1B,SAAAC,GAAU,OAAIA,EAAW7I,MAAQJ,EAAYI,OAEzC8I,EAAaH,EAAU,6CAAY,0DACxBA,EAAU,SAAAtH,GAAE,OAAIgE,EAAI0D,WAAW1H,IAAM,SAAAA,GAAE,OAAIgE,EAAI2D,SAAS3H,KAGhE7B,EAAK6B,IACXwE,MAAK,SAACrH,GAEL,IAAMyK,EAAc,CAClB/I,MAAO1B,EAAImC,KACXV,KAAMzB,EAAIyB,KACVE,MAAO3B,EAAI2B,MACXJ,MAAOvB,EAAIuB,MAAMC,IACjBqB,GAAI7C,EAAIwB,KAGJkJ,EAAWlI,EAAMC,KAAI,SAACkI,GAAD,OACzBA,EAAY9H,KAAO7B,EAAK6B,GAAK4H,EAAcE,KAG7CzC,EAASwC,MAEVf,OAAM,SAACiB,GACNf,QAAQC,IAAR,uEAA0BQ,EAA1B,2EAAqDM,EAArD,UAqEEhI,aAhEwB,SAAC5B,GAC/BsH,EAAetH,IAgETwB,MAAOA,EACPD,UAAWA,KAEb,cAAC,EAAD,IAGE4F,GACA,cAAC,EAAD,CACEnH,KAAMmH,EACNhF,QAAU,kBAAMiF,EAAgB,SAIpC,cAAC,EAAD,CACEjE,WAAY0E,EACZ5F,OAAQsF,EACR1C,aAhJiB,SAAC,GAAkB,IAAjB1D,EAAgB,EAAhBA,KAAMuD,EAAU,EAAVA,KAC/BoD,EAAqB,mEACrBjC,EAAIgE,iBAAiB,CAAC1I,OAAMuD,SACzB2B,MAAK,SAACrH,GACL6J,QAAQC,IAAR,wMACA7B,EAAe,2BAAI7G,GAAL,IAAkBe,KAAMnC,EAAImC,KAAME,MAAOrC,EAAIqC,SAC3DmG,GAAwB,MAEzBmB,OAAM,SAACiB,GACNf,QAAQC,IAAR,4NAAuDc,EAAvD,SAEDb,SAAQ,WACPjB,EAAqB,8DAqInB3F,QAAS,kBAAMqF,GAAwB,MAIzC,cAAC,EAAD,CACErE,WAAY4E,EACZ9F,OAAQ0F,EACRtC,eAvImB,SAACyE,GAC1B9B,EAAoB,mEACpBnC,EAAIkE,eAAe,CAAC7I,OAAQ4I,IAC3BzD,MAAK,SAACrH,GACLiI,EAAe,2BAAI7G,GAAL,IAAkBc,OAAQlC,EAAIkC,UAC5C0G,GAAuB,MAExBe,OAAM,SAACiB,GACNf,QAAQC,IAAR,sNAAsDc,EAAtD,SAEDb,SAAQ,WACPf,EAAoB,8DA6HhB7F,QAAS,kBAAMyF,GAAuB,MAIxC,cAAC,EAAD,CACEzE,WAAY8E,GACZhG,OAAQwF,EACRnG,WAxEe,SAAC0I,GACtB9B,GAAsB,mEACtBrC,EAAIoE,YAAY,CAAC9I,KAAM6I,EAAStJ,MAAOD,KAAMuJ,EAASvJ,OACnD4F,MAAK,SAACrH,GACL,IAAMkL,EAAU,CACdxJ,MAAO1B,EAAImC,KACXV,KAAMzB,EAAIyB,KACVE,MAAO3B,EAAI2B,MACXJ,MAAOvB,EAAIuB,MAAMC,IACjBqB,GAAI7C,EAAIwB,KAEV0G,EAAS,CAACgD,GAAF,mBAAc1I,KACtBkG,GAAqB,MAEtBiB,OAAM,SAACiB,GACNf,QAAQC,IAAR,6QAAgEc,EAAhE,SAEDb,SAAQ,WACPb,GAAsB,kDAuDpB/F,QAAS,kBAAMuF,GAAqB,MAGtC,cAAC,EAAD,CACEvE,WAAYgF,GACZnI,KAAMqH,EACNzB,UApGiB,SAAC5F,GACxBoI,GAAwB,uDACxBvC,EAAIsE,WAAWnK,EAAK6B,IACjBwE,MAAK,SAACrH,GAEL,IAAM0K,EAAWlI,EAAM4I,QAAO,SAACT,GAAD,OAC5BA,EAAY9H,KAAO7B,EAAK6B,MAG1BqF,EAASwC,GACTb,QAAQC,IAAR,2DAAwB9I,EAAK6B,GAA7B,iDACAyF,EAAe,SAEhBqB,OAAM,SAACiB,GACNf,QAAQC,IAAR,yMAAmDc,EAAnD,SAEDb,SAAQ,WACPX,GAAwB,oBAoFtBjG,QAAS,kBAAMmF,EAAe,eC/JzB+C,EA7ED,SAAC1L,GAAW,IAAD,EAEG2E,mBAAS,IAFZ,mBAEhB2F,EAFgB,KAETqB,EAFS,OAGShH,mBAAS,IAHlB,mBAGhBiH,EAHgB,KAGNC,EAHM,KAajB3G,EAAY,WAChByG,EAAS,IACTE,EAAY,KAWd,OACE,sBAAK9K,UAAU,OAAf,UACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAMb,GAAG,UAAUa,UAAU,iBAA7B,kFAGF,yBAASA,UAAU,OAAnB,SACE,uBACEyB,KAAK,aACLzB,UAAU,aACVsD,SAlBa,SAAC2B,GACpBA,EAAEC,iBACIqE,GAAUsB,GAGhB5L,EAAM8L,QAAQxB,EAAOsB,EAAU1G,IAU3B,UAKE,oBAAInE,UAAU,gBAAd,sCAEA,gCACE,uBAAOoD,KAAK,QACVjB,GAAG,QAAQV,KAAK,QAChBzB,UAAU,aACVoF,UAAU,KAAKC,UAAU,IACzBC,YAAY,QAAQC,UAAQ,EAC5BhC,MAAOgG,EACP/D,SA1Cc,SAAChB,GACzBoG,EAASpG,EAAMtB,OAAOK,YA6ChB,gCACE,uBAAOH,KAAK,WACVjB,GAAG,WAAWV,KAAK,WACnBzB,UAAU,aACVoF,UAAU,KAAKC,UAAU,IACzBC,YAAY,WAAWC,UAAQ,EAC/BhC,MAAOsH,EACPrF,SAjDiB,SAAChB,GAC5BsG,EAAYtG,EAAMtB,OAAOK,YAoDnB,wBAAQH,KAAK,SAASpD,UAAU,eAAhC,4CAIA,oBAAGA,UAAU,aAAb,8IAEE,cAAC,IAAD,CAAMb,GAAG,UAAUa,UAAU,aAA7B,6FCSGgL,EA7EE,SAAC/L,GAAW,IAAD,EAEA2E,mBAAS,IAFT,mBAEnB2F,EAFmB,KAEZqB,EAFY,OAGMhH,mBAAS,IAHf,mBAGnBiH,EAHmB,KAGTC,EAHS,KAapB3G,EAAY,WAChByG,EAAS,IACTE,EAAY,KAWd,OACE,sBAAK9K,UAAU,OAAf,UACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAMb,GAAG,UAAUa,UAAU,iBAA7B,8CAGF,yBAASA,UAAU,OAAnB,SACE,uBACEyB,KAAK,gBACLzB,UAAU,aACVsD,SAlBa,SAACkB,GACpBA,EAAMU,iBACAqE,GAAUsB,GAGhB5L,EAAMgM,WAAW1B,EAAOsB,EAAU1G,IAU9B,UAKE,oBAAInE,UAAU,gBAAd,gFAEA,gCACE,uBAAOoD,KAAK,QACVjB,GAAG,QAAQV,KAAK,QAChBzB,UAAU,aACVoF,UAAU,KAAKC,UAAU,IACzBC,YAAY,QAAQC,UAAQ,EAC5BhC,MAAOgG,EACP/D,SA1Cc,SAAChB,GACzBoG,EAASpG,EAAMtB,OAAOK,YA6ChB,gCACE,uBAAOH,KAAK,WACVjB,GAAG,WAAWV,KAAK,WACnBzB,UAAU,aACVoF,UAAU,KAAKC,UAAU,IACzBC,YAAY,WAAWC,UAAQ,EAC/BhC,MAAOsH,EACPrF,SAjDiB,SAAChB,GAC5BsG,EAAYtG,EAAMtB,OAAOK,YAoDnB,wBAAQH,KAAK,SAASpD,UAAU,eAAhC,0HAIA,oBAAGA,UAAU,aAAb,iIAEE,cAAC,IAAD,CAAMb,GAAG,UAAUa,UAAU,aAA7B,yDCpDGkL,EAjBE,WACf,OACE,sBAAKlL,UAAU,OAAf,UACE,cAAC,EAAD,IACA,0BAASA,UAAU,YAAnB,UACE,oBAAIA,UAAU,mBAAd,sDAGA,mBAAGA,UAAU,sBAAb,6HC8BOmL,EAvCK,SAAClM,GAAW,IAAD,EACe2E,mBAAS,IADxB,mBACtBmC,EADsB,KACNC,EADM,KAY7B,OAJAlD,qBAAU,WACRkD,EAAkB,kBACjB,IAGD,qBAAKhG,UAAS,gBAAW+F,GAAzB,SACE,sBAAK/F,UAAU,mBAAf,UAEE,wBACEoD,KAAK,SACLpD,UAAU,4CACVgB,MAAM,4EACNT,QAjBiB,WACvByF,EAAkB,IAClB/G,EAAMwD,aAkBF,sBAAKzC,UAAU,qBAAf,UACE,qBACEA,UAAU,sBACVC,IAAKhB,EAAMmM,UACXjL,IAAKlB,EAAMoM,cAEb,mBAAGrL,UAAU,sBAAb,SACGf,EAAMoM,uBChCJ,MAA0B,wCCA1B,MAA0B,wCC2J1BC,EA7IH,WAAO,IAAD,EACgB1H,oBAAS,GADzB,mBACT1E,EADS,KACCqM,EADD,OAEsB3H,oBAAS,GAF/B,mBAET4H,EAFS,KAEIC,EAFJ,OAG0B7H,mBAAS,CAAE8H,MAAO,KAAMC,KAAM,KAHxD,mBAGTC,EAHS,KAGMC,EAHN,OAIUjI,mBAAS,IAJnB,mBAIT2F,EAJS,KAIFqB,EAJE,KAMZkB,EAAUC,cAERC,EAAa,WACjB,GAAIC,aAAaC,QAAQ,OAAQ,CAC/B,IAAMC,EAAMF,aAAaC,QAAQ,QhCOZE,EgCNLD,EhCOb1F,MAAM,GAAD,OAAIrH,EAAJ,aAAyB,CACnCsH,OAAQ,MACRL,QAAS,CACP,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2B+F,MAG9BzF,MAAK,SAACrH,GAAD,OAASD,EAAeC,OgCdvBqH,MAAK,SAACrH,GACDA,IACFsL,EAAStL,EAAI2H,KAAKsC,OAClBgC,GAAY,GACZO,EAAQO,KAAK,aAGhBpD,OAAM,SAAAiB,GACLf,QAAQC,IAAI,mKACZmC,GAAY,MhCJI,IAACa,GgCSzBtJ,qBAAU,WACRkJ,MAEC,CAAC9M,IAoEJ,OACE,eAAC,IAAMoN,SAAP,WACE,eAAC,IAAD,WACE,cAAC,EAAD,CACEC,KAAK,QACLrN,SAAUA,EACVF,UAAWqI,EACXmC,SAZa,WACnByC,aAAaO,WAAW,OACxBjB,GAAY,IAWNhC,MAAOA,IAGT,cAAC,IAAD,CAAOgD,KAAK,UAAZ,SACE,cAAC,EAAD,CAAOxB,QA9CK,SAAC0B,EAAWC,EAAcC,IhC1DvB,SAACpD,EAAOsB,GAC/B,OAAOpE,MAAM,GAAD,OAAIrH,EAAJ,WAAuB,CACjCsH,OAAQ,OACRL,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBS,KAAMC,KAAKC,UAAU,CAACuC,QAAOsB,eAE9BlE,MAAK,SAACrH,GAAD,OAASD,EAAeC,OgCmD5BsN,CAAeH,EAAWC,GACvB/F,MAAK,SAACM,GACDA,EAAKmF,QACPH,aAAaY,QAAQ,MAAO5F,EAAKmF,OACjCO,IACAb,EAAQO,KAAK,SACbd,GAAY,OAGftC,OAAM,SAAAiB,GACL,IAAI4C,EAAc,GAAI1B,EAAY2B,EAClC,OAAQ7C,GACN,KAAK,IACH4C,EAAc,+KACd,MACF,KAAK,IACHA,EAAW,6HAA+BL,EAA/B,sDACX,MACF,QACEK,EAAc,sMAElBjB,EAAiB,CAAEH,MAAON,EAAWO,KAAMmB,IAC3C3D,QAAQC,IAAI0D,GACZrB,GAAe,OAqBgBK,QAASA,EAASvC,MAAOA,MAGxD,cAAC,IAAD,CAAOgD,KAAK,UAAZ,SACE,cAAC,EAAD,CAAUtB,WA9EK,SAACwB,EAAWC,EAAcM,GAC/C,IAAIF,EAAc,GAAI1B,EAAY,MhC3Cd,SAAC7B,EAAOsB,GAC9B,OAAOpE,MAAM,GAAD,OAAIrH,EAAJ,WAAuB,CACjCsH,OAAQ,OACRL,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBS,KAAMC,KAAKC,UAAU,CAAEuC,QAAOsB,eAE/BlE,MAAK,SAACrH,GAAD,OAASD,EAAeC,OgCoC5BsN,CAAcH,EAAWC,GACtB/F,MAAK,SAACrH,GACL0N,IACAlB,EAAQO,KAAK,WACbS,EAAa,wKACb1B,EAAY6B,KAEbhE,OAAM,SAACiB,GACN,OAAQA,GACN,KAAK,IACH4C,EAAc,2OACd1B,EAAY2B,EACZ,MACF,QACED,EAAc,sMACd1B,EAAY2B,MAGjB1D,SAAQ,WACPwC,EAAiB,CAAEH,MAAON,EAAWO,KAAMmB,IAC3C3D,QAAQC,IAAI0D,GACZrB,GAAe,OAsDyBK,QAASA,MAGjD,cAAC,IAAD,CAAOoB,OAAK,EAACX,KAAK,IAAlB,SACGrN,EAAW,cAAC,IAAD,CAAUC,GAAG,UAAa,cAAC,IAAD,CAAUA,GAAG,cAGrD,cAAC,IAAD,CAAOoN,KAAK,oBAAZ,SACGrN,EAAW,cAAC,IAAD,CAAUC,GAAG,UAAa,cAAC,IAAD,CAAUA,GAAG,cAErD,cAAC,IAAD,CAAOoN,KAAK,IAAZ,SACE,cAAC,EAAD,SAKFf,GACA,cAAC2B,EAAD,CACE1K,QApGiB,WACvBgJ,GAAe,IAoGTL,UAAWQ,EAAcF,MACzBL,YAAaO,EAAcD,WC7IrCyB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJvK,SAASwK,eAAe,W","file":"static/js/main.c957c4a8.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;\r\n","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const handleResponse = (res) => {\r\n  if (res.ok) return res.json();\r\n  return Promise.reject(res.status);\r\n};\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n  .then((res) => handleResponse(res));\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email, password})\r\n  })\r\n  .then((res) => handleResponse(res));\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n  .then((res) => handleResponse(res));\r\n};\r\n\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","export default __webpack_public_path__ + \"static/media/header-logo.c2821b38.svg\";","import React from 'react';\r\nimport headerLogo from '../images/header-logo.svg';\r\n\r\nconst Header = (props) => (\r\n\r\n  <header className=\"header\">\r\n\r\n    <img className=\"header__logo\" src={headerLogo}\r\n      alt='Логотип сервиса Mesto-Russia'/>\r\n\r\n    <nav className=\"nav-menu\">\r\n      {props.children}\r\n    </nav>\r\n\r\n  </header>\r\n\r\n);\r\n\r\nexport default Header;\r\n","import React, { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ card, onClick, onLike, onDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isOwned = card.owner === currentUser._id;\r\n\r\n  const handleClick = () => {\r\n    onClick(card);\r\n  };\r\n\r\n  const handleLike = () => {\r\n    onLike(card);\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    onDelete(card);\r\n  };\r\n\r\n  return(\r\n    <li className=\"card\">\r\n      <img \r\n        className=\"card__image\" \r\n        src={card.link} \r\n        alt={card.title} \r\n        onClick={handleClick} \r\n      />\r\n      <div className=\"card__description\">\r\n        <h2 className=\"card__title\">{card.title}</h2>\r\n        <div className=\"card__like-group\">\r\n          <button \r\n            className={\r\n              `card__btn card__btn_action_like shaded \r\n              ${card.likes.length > 0  ? 'card__btn_clicked' : ''}`\r\n            }\r\n            onClick={handleLike}\r\n            title=\"Нравится\" \r\n          />\r\n          <span className=\"card__like-num\">\r\n            {card.likes.length}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <button \r\n        className=\"card__btn card__btn_action_del shaded\" \r\n        disabled={!isOwned} hidden={!isOwned}\r\n        onClick={handleDelete}\r\n        title=\"Удалить\"\r\n      />\r\n    </li>\r\n  );\r\n\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"loader\"/>\r\n  );\r\n};\r\n\r\nexport default Loader;","import React, {useContext} from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Card from './Card';\r\nimport Loader from './Loader';\r\n\r\nfunction Main(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return(\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n\r\n        <div className=\"profile__avatar\" onClick={props.onEditAvatar}>\r\n          <img \r\n            src={currentUser.avatar} \r\n            className=\"profile__image\" \r\n            alt=\"Аватар профиля\" \r\n            title=\"Изменить аватар профиля\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"profile__description\">\r\n          <h1 className=\"profile__name\">\r\n            {currentUser.name}\r\n          </h1>\r\n          <button \r\n            className=\"profile__btn profile__btn_action_edit shaded\"\r\n            title=\"Редактировать профиль\" \r\n            onClick={props.onEditProfile} \r\n          />\r\n          <p className=\"profile__work\">{currentUser.about}</p>\r\n        </div>\r\n\r\n        <button \r\n          className=\"profile__btn profile__btn_action_add shaded\" \r\n          onClick={props.onAddPlace} \r\n          title=\"Добавить фотографию\" \r\n        />\r\n      </section>\r\n\r\n      <section className=\"photo-grid\">\r\n      { props.isLoading \r\n        ? <Loader/>\r\n        : <ul className=\"photo-grid__list\">\r\n            {props.cards.map((card) => (\r\n              <Card key={card.id}\r\n                card={card} \r\n                onClick={props.onCardClick}\r\n                onLike={props.onCardLike}\r\n                onDelete={props.onCardDelete}\r\n              />\r\n            ))}        \r\n          </ul>\r\n      } \r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nconst Footer = () => (\r\n  <footer className=\"footer\">\r\n    <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\r\n  </footer>\r\n);\r\n\r\nexport default Footer;","import React, { useEffect, useCallback } from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  const openClass = props.isOpen && 'popup_opened';\r\n\r\n  const handleCloseClick = props.onClose;\r\n\r\n  const handleEscPress = useCallback((evt) => {\r\n    if (evt.key === 'Escape') handleCloseClick();\r\n  }, [handleCloseClick]);\r\n\r\n  useEffect(() => {\r\n    if (props.isOpen) {\r\n      document.addEventListener('keyup', handleEscPress);\r\n    } else {\r\n      document.removeEventListener('keyup', handleEscPress);\r\n    };\r\n  }, [props.isOpen, handleEscPress]);\r\n\r\n  const handleOverlayClick = (evt) => {\r\n    if (evt.target === evt.currentTarget) handleCloseClick();\r\n  };\r\n\r\n  return(\r\n    <div\r\n      className={`popup popup_content_${props.name} ${openClass}`}\r\n      onClick={handleOverlayClick}\r\n    >\r\n    <div className=\"popup__container\">\r\n\r\n      <button\r\n        type=\"button\"\r\n        className=\"popup__btn popup__btn_action_close shaded\"\r\n        title=\"Закрыть форму без сохранения данных\"\r\n        onClick={handleCloseClick}\r\n      />\r\n\r\n      <form\r\n        name={props.name}\r\n        className={`popup__form popup__form_size_${props.size}`}\r\n        onSubmit={props.onSubmit}\r\n      >\r\n          <h3 className=\"popup__heading\">\r\n            {props.title}\r\n          </h3>\r\n\r\n          {props.children}\r\n\r\n          <button\r\n            type=\"submit\" value=\"Создать\"\r\n            disabled={props.submitDisabled}\r\n            className=\"popup__btn popup__btn_action_submit\"\r\n          >\r\n              {props.submitName}\r\n          </button>\r\n\r\n      </form>\r\n    </div>\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","\r\n// Используется при валидации форм\r\nexport const popupInputClass = {\r\n  inputError: 'popup__item_type_error',\r\n  error: 'popup__error_visible',\r\n};\r\n","import { useState, useCallback } from 'react';\r\n\r\nexport function useFormWithValidation() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState({});\r\n\r\n  const handleChange = (event) => {\r\n    const target = event.target;\r\n    const {name, value} = event.target;\r\n    setValues({...values, [name]: value});\r\n    setIsValid(target.closest(\"form\").checkValidity());\r\n  };\r\n\r\n  const handleInput = (event) => {\r\n    const {name, value, validity, validationMessage} = event.target;\r\n    setValues({...values, [name]: value});\r\n    setIsValid({...isValid, [name]: validity.valid});\r\n    setErrors({...errors, [name]: validationMessage });\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, setValues, handleChange, handleInput, errors, isValid, resetForm };\r\n}\r\n\r\n\r\n","import React, { useContext, useEffect } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {popupInputClass} from '../utils/constants';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\n\r\n// Редактирование профиля пользователя\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const {\r\n    values, handleChange, handleInput,\r\n    errors, isValid, resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n    if (props.isOpen) {\r\n      resetForm({ name: currentUser.name, info: currentUser.about }, {}, true);\r\n    };\r\n  }, [currentUser, props.isOpen, resetForm]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateUser({ name: values.name, info: values.info });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\" size=\"l\"\r\n      title=\"Редактировать профиль\"\r\n      submitName={props.submitName}\r\n      submitDisabled={!isValid}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\"\r\n          id=\"name\" name=\"name\"\r\n          className={`\r\n            popup__item popup__item_type_name\r\n            ${ errors.name ? popupInputClass.inputError : '' }\r\n          `}\r\n          maxLength=\"40\" minLength=\"2\"\r\n          placeholder=\"Имя\" required\r\n          value={values.name || ''}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span\r\n          className={`popup__error ${popupInputClass.error}`}\r\n          id=\"name-error\"\r\n        >\r\n          {errors.name || ''}\r\n        </span>\r\n      </label>\r\n\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\"\r\n          id=\"info\" name=\"info\"\r\n          className={`\r\n            popup__item popup__item_type_info\r\n            ${ errors.info ? popupInputClass.inputError : '' }\r\n          `}\r\n          maxLength=\"200\" minLength=\"2\"\r\n          placeholder=\"О себе\" required\r\n          value={values.info || ''}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span\r\n          className={`popup__error ${popupInputClass.error}`}\r\n          id=\"info-error\"\r\n        >\r\n          {errors.info || ''}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React, {useContext, useEffect} from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {popupInputClass} from '../utils/constants';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\n\r\n// Редактирование пользователького аватара\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const {\r\n    values, handleChange, handleInput,\r\n    errors, isValid, resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    if (props.isOpen) {\r\n      resetForm({ avatar: currentUser.avatar }, {}, true);\r\n    } else {\r\n      resetForm();\r\n    };\r\n  }, [currentUser, props.isOpen, resetForm]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar(values.avatar);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\" size=\"m\"\r\n      title=\"Обновить аватар\"\r\n      submitName={props.submitName}\r\n      submitDisabled={!isValid}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input type=\"url\"\r\n          id=\"avatar\" name=\"avatar\"\r\n          pattern=\"https?://.+\"\r\n          className={\r\n            `popup__item popup__item_type_name\r\n            ${errors.avatar ? popupInputClass.inputError : ''}`\r\n          }\r\n          placeholder=\"Ссылка на картинку\" required\r\n          value={values.avatar || ''}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span\r\n          className={`popup__error  ${popupInputClass.error}`}\r\n          id=\"avatar-error\"\r\n        >\r\n          {errors.avatar || ''}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React, {useEffect} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {popupInputClass} from '../utils/constants';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\n\r\n// Добавление карточки\r\n\r\nconst AddPlacePopup = (props) => {\r\n  const {\r\n    values, handleChange, handleInput,\r\n    errors, isValid, resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n  }, [props.isOpen, resetForm]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onAddPlace(values);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"card\" size=\"l\"\r\n      title=\"Новое место\"\r\n      submitName={props.submitName}\r\n      submitDisabled={!isValid}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\"\r\n          id=\"title\" name=\"title\"\r\n          maxLength=\"30\" minLength=\"1\"\r\n          className={\r\n            `popup__item popup__item_type_name\r\n            ${errors.title ? popupInputClass.inputError : ''}`\r\n          }\r\n          placeholder=\"Название\"\r\n          required\r\n          value={values.title || ''}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span\r\n          className={`popup__error ${popupInputClass.error}`}\r\n          id=\"title-error\"\r\n        >\r\n          {errors.title || ''}\r\n        </span>\r\n      </label>\r\n\r\n      <label className=\"popup__field\">\r\n        <input type=\"url\"\r\n          id=\"link\" name=\"link\"\r\n          pattern=\"https?://.+\"\r\n          className={\r\n            `popup__item popup__item_type_info\r\n            ${errors.link ? popupInputClass.inputError : ''}`\r\n          }\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n          value={values.link || ''}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span\r\n          className={`popup__error ${popupInputClass.error}`}\r\n          id=\"link-error\"\r\n        >\r\n          {errors.link || ''}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","import React, { useState, useEffect } from 'react';\r\n\r\n// Всплывающее окно просмотра фотографии\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  const [popupOpenClass, setPopupOpenClass] = useState('');\r\n\r\n  const handleCloseClick = () => {\r\n    setPopupOpenClass('');\r\n    onClose();\r\n  }\r\n\r\n  const handleOverlayClick = (evt) => {\r\n    if (evt.target === evt.currentTarget) handleCloseClick();\r\n  };\r\n\r\n  // Создание всплывающего окна\r\n  useEffect(() => {\r\n\r\n    const handleEscPress = (evt) => {\r\n      if (evt.key === 'Escape') handleCloseClick();\r\n    };\r\n\r\n    // Добавляем обработку нажатия ESC\r\n    document.addEventListener('keyup', handleEscPress);\r\n    // Делаем окно видимым\r\n    setPopupOpenClass('popup_opened');\r\n\r\n    // Удаление всплывающего окна\r\n    return (() => {\r\n      // Удаляем обработчик нажатия ESC\r\n      document.removeEventListener('keyup', handleEscPress);\r\n    });\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return(\r\n    <div \r\n      className={`popup popup_content_image ${popupOpenClass}`}\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div \r\n        className=\"popup__image-box\"\r\n      >\r\n        <button \r\n          type=\"button\" \r\n          className=\"popup__btn popup__btn_action_close shaded\"\r\n          title=\"Закрыть окно просмотра\"\r\n          onClick={handleCloseClick} \r\n        />\r\n\r\n        <figure \r\n          className=\"popup__figure\"\r\n        >\r\n          <img \r\n            className=\"popup__image\" \r\n            src={card.link} \r\n            alt={card.title}\r\n          />\r\n          <figcaption \r\n            className=\"popup__image-caption\"\r\n          >\r\n            {card.title}\r\n          </figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n// Всплывающее окно подтверждения действия\r\n\r\nfunction ConfirmPopup(props) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onConfirm(props.card);\r\n  };\r\n\r\n  return(\r\n    <PopupWithForm \r\n      name=\"confirm\" size=\"s\" \r\n      title=\"Вы уверены?\"\r\n      submitName={props.submitName}\r\n      submitDisabled={false}\r\n      isOpen={props.card} \r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;","//--------------------------------------------------------------------------------------\r\n// Модуль api.js\r\n// Класс Api\r\n//--------------------------------------------------------------------------------------\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (res.ok) return res.json();\r\n    return Promise.reject(res.status);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  postNewCard(item) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify(item)\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  patchNewAvatar(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify(link)\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  patchUserProfile(data) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({name: data.name, about: data.info})\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  likeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'PUT',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  unlikeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\r\n  headers: {\r\n    authorization: '963ba2cb-ffe5-4800-9828-03d0e9a57e68',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default api;\r\n","export default __webpack_public_path__ + \"static/media/profile-avatar.5024594e.jpg\";","// Начальные значения карточек\r\n// Массив используется, если данные не загрузились с сервера\r\n\r\nimport peterhofImage4 from '../images/photo-grid-peterhof-4.jpg';\r\nimport peterhofImage3 from '../images/photo-grid-peterhof-3.jpg';\r\nimport peterhofImage1 from '../images/photo-grid-peterhof-1.jpg';\r\nimport oranienbaumImage from '../images/photo-grid-oranienbaum-1.jpg';\r\nimport alexandriaImage from '../images/photo-grid-aleksandria.jpg';\r\nimport peterhofImage from '../images/photo-grid-peterhof.jpg';\r\n\r\nexport const initialCards = [\r\n  { title: 'Петергоф', link: peterhofImage4, likes: [], owner: 0, id: 1 },\r\n  { title: 'Петергоф', link: peterhofImage3, likes: [], owner: 0, id: 2 },\r\n  { title: 'Петергоф', link: peterhofImage1, likes: [], owner: 0, id: 3 },\r\n  { title: 'Ораниенбаум', link: oranienbaumImage, likes: [], owner: 0, id: 4 },\r\n  { title: 'Парк Александрия', link: alexandriaImage, likes: [], owner: 0, id: 5 },\r\n  { title: 'Петергоф', link: peterhofImage, likes: [], owner: 0, id: 6 }\r\n];\r\n\r\n","export default __webpack_public_path__ + \"static/media/photo-grid-peterhof-4.947a5379.jpg\";","export default __webpack_public_path__ + \"static/media/photo-grid-peterhof-3.d5249dfb.jpg\";","export default __webpack_public_path__ + \"static/media/photo-grid-peterhof-1.57bdf3c4.jpg\";","export default __webpack_public_path__ + \"static/media/photo-grid-oranienbaum-1.48084ea7.jpg\";","export default __webpack_public_path__ + \"static/media/photo-grid-aleksandria.504811f3.jpg\";","export default __webpack_public_path__ + \"static/media/photo-grid-peterhof.8dd60d68.jpg\";","import React, {useState, useEffect} from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Header from '../components/Header';\r\nimport Main from '../components/Main';\r\nimport Footer from '../components/Footer';\r\n\r\nimport EditProfilePopup from '../components/EditProfilePopup';\r\nimport EditAvatarPopup from '../components/EditAvatarPopup';\r\nimport AddPlacePopup from '../components/AddPlacePopup';\r\nimport ImagePopup from '../components/ImagePopup';\r\nimport ConfirmPopup from '../components/ConfirmPopup';\r\n\r\nimport api from '../utils/api';\r\nimport profileAvatar from '../images/profile-avatar.jpg';\r\nimport {initialCards} from '../utils/cards-init';\r\n\r\nfunction HomePage(props) {\r\n  const [currentUser, setCurrentUser] = useState({\r\n    _id: 0,\r\n    name: 'Екатерина',\r\n    about: '(без доступа в сеть)',\r\n    avatar: profileAvatar,\r\n  });\r\n\r\n  const [cards, setCards] = useState(initialCards);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [deletedCard, setDeletedCard] = useState(null);\r\n\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n\r\n  const [profileSubmitName, setProfileSubmitName] = useState('Сохранить');\r\n  const [avatarSubmitName, setAvatarSubmitName] = useState('Сохранить');\r\n  const [addPlaceSubmitName, setAddPlaceSubmitName] = useState('Создать');\r\n  const [deleteCardSubmitName, setDeleteCardSubmitName] = useState('Да');\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Читаем данные с сервера\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n\r\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n    .then(([userData, cardsData]) => {\r\n\r\n      setCurrentUser({\r\n        _id: userData._id,\r\n        name: userData.name,\r\n        about: userData.about,\r\n        avatar: userData.avatar\r\n      });\r\n\r\n      setCards(cardsData.map(item => {\r\n        return {\r\n          title: item.name,\r\n          link: item.link,\r\n          likes: item.likes,\r\n          owner: item.owner._id,\r\n          id: item._id\r\n        };\r\n      }));\r\n    })\r\n    .catch((error) => {\r\n      console.log(`Ошибка загрузки данных: ${error}.`);\r\n    })\r\n    .finally(() => {\r\n      setIsLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  // Обновление информации о пользователе на сервере\r\n  const handleUpdateUser = ({name, info}) => {\r\n    setProfileSubmitName('Сохранение...');\r\n    api.patchUserProfile({name, info})\r\n      .then((res) => {\r\n        console.log(`Информация о пользователе сохранена.`);\r\n        setCurrentUser({...currentUser, name: res.name, about: res.about});\r\n        setEditProfilePopupOpen(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно сохранить данные на сервере. ${err}.`);\r\n      })\r\n      .finally(() => {\r\n        setProfileSubmitName('Сохранить');\r\n      });\r\n  };\r\n\r\n  // Обновление пользовательского аватара на сервере\r\n  const handleUpdateAvatar = (newAvatarLink) => {\r\n    setAvatarSubmitName('Сохранение...');\r\n    api.patchNewAvatar({avatar: newAvatarLink})\r\n    .then((res) => {\r\n      setCurrentUser({...currentUser, avatar: res.avatar});\r\n      setEditAvatarPopupOpen(false);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Невозможно обновить аватар на сервере. ${err}.`);\r\n    })\r\n    .finally(() => {\r\n      setAvatarSubmitName('Сохранить');\r\n    });\r\n  };\r\n\r\n  const handleCardLike = (card) => {\r\n    const isLiked = (card.likes.some(\r\n      likeAuthor => likeAuthor._id === currentUser._id\r\n    ));\r\n    const likeAction = isLiked ? 'удалить' : 'поставить';\r\n    const likeFunc = isLiked ? id => api.unlikeCard(id) : id => api.likeCard(id);\r\n\r\n    // Ставим или удаляем лайк в зависимости от его текущего состояния\r\n    likeFunc(card.id)\r\n      .then((res) => {\r\n        // Если запрос выполнен успешно, создаем новую карточку\r\n        const changedCard = {\r\n          title: res.name,\r\n          link: res.link,\r\n          likes: res.likes,\r\n          owner: res.owner._id,\r\n          id: res._id\r\n        };\r\n        // Выполняем замену карточки\r\n        const newCards = cards.map((currentCard) => (\r\n          currentCard.id === card.id ? changedCard : currentCard\r\n        ));\r\n        // Обновляем состояние\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно ${likeAction} лайк. Ошибка ${err}.`);\r\n      });\r\n  };\r\n\r\n  // Удаление карточки\r\n  const handleDeleteButtonClick = (card) => {\r\n    setDeletedCard(card);\r\n  };\r\n\r\n  const handleCardDelete = (card) => {\r\n    setDeleteCardSubmitName('Удаление...');\r\n    api.deleteCard(card.id)\r\n      .then((res) => {\r\n        // Исключаем из массива удаленную карточку\r\n        const newCards = cards.filter((currentCard) => (\r\n          currentCard.id !== card.id\r\n        ));\r\n        // Обновляем состояние\r\n        setCards(newCards);\r\n        console.log(`Карточка ${card.id} удалена.`);\r\n        setDeletedCard(null);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно удалить карточку. Ошибка ${err}.`);\r\n      })\r\n      .finally(() => {\r\n        setDeleteCardSubmitName('Да');\r\n      });\r\n  };\r\n\r\n  const handleAddPlace = (newPlace) => {\r\n    setAddPlaceSubmitName('Сохранение...');\r\n    api.postNewCard({name: newPlace.title, link: newPlace.link})\r\n      .then((res) => {\r\n        const newCard = {\r\n          title: res.name,\r\n          link: res.link,\r\n          likes: res.likes,\r\n          owner: res.owner._id,\r\n          id: res._id\r\n        };\r\n        setCards([newCard, ...cards]);\r\n        setAddPlacePopupOpen(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно сохранить карточку на сервере. Ошибка ${err}.`);\r\n      })\r\n      .finally(() => {\r\n        setAddPlaceSubmitName('Создать');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header>\r\n          <p className=\"nav-menu__text nav-menu__text_type_email\">\r\n            {props.email}\r\n          </p>\r\n          <p className=\"nav-menu__text\" onClick={props.onLogout}>\r\n            Выйти\r\n          </p>\r\n        </Header>\r\n        <Main\r\n          onEditProfile={() => setEditProfilePopupOpen(true)}\r\n          onAddPlace={() => setAddPlacePopupOpen(true)}\r\n          onEditAvatar={() => setEditAvatarPopupOpen(true)}\r\n          onCardClick={(card) => setSelectedCard(card)}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleDeleteButtonClick}\r\n          cards={cards}\r\n          isLoading={isLoading}\r\n        />\r\n        <Footer />\r\n\r\n        {/* Просмотр фотографии */}\r\n        { selectedCard &&\r\n          <ImagePopup\r\n            card={selectedCard}\r\n            onClose={ () => setSelectedCard(null) }\r\n          />\r\n        }\r\n        {/* Редактирование профиля пользователя */}\r\n        <EditProfilePopup\r\n          submitName={profileSubmitName}\r\n          isOpen={isEditProfilePopupOpen}\r\n          onUpdateUser={handleUpdateUser}\r\n          onClose={() => setEditProfilePopupOpen(false)}\r\n        />\r\n\r\n        {/* Обновление аватара пользователя */}\r\n        <EditAvatarPopup\r\n          submitName={avatarSubmitName}\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          onClose={() => setEditAvatarPopupOpen(false)}\r\n        />\r\n\r\n        {/* Добавление карточки */}\r\n        <AddPlacePopup\r\n          submitName={addPlaceSubmitName}\r\n          isOpen={isAddPlacePopupOpen}\r\n          onAddPlace={handleAddPlace}\r\n          onClose={() => setAddPlacePopupOpen(false)}\r\n        />\r\n\r\n        <ConfirmPopup\r\n          submitName={deleteCardSubmitName}\r\n          card={deletedCard}\r\n          onConfirm={handleCardDelete}\r\n          onClose={() => setDeletedCard(null)}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import React, {useState} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from '../components/Header';\r\n\r\nconst Login = (props) => {\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if ( !email || !password ) {\r\n      return;\r\n    }\r\n    props.onLogin(email, password, resetForm);\r\n  }\r\n\r\n  return(\r\n    <div className=\"page\">\r\n      <Header>\r\n        <Link to=\"/signup\" className=\"nav-menu__link\">Регистрация</Link>\r\n      </Header>\r\n\r\n      <section className=\"sign\">\r\n        <form\r\n          name=\"form-login\"\r\n          className=\"sign__form\"\r\n          onSubmit={handleSubmit}\r\n        >\r\n          <h3 className=\"sign__heading\">Вход</h3>\r\n\r\n          <label>\r\n            <input type=\"email\"\r\n              id=\"email\" name=\"email\"\r\n              className=\"sign__item\"\r\n              maxLength=\"40\" minLength=\"2\"\r\n              placeholder=\"Email\" required\r\n              value={email}\r\n              onChange={handleEmailChange}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            <input type=\"password\"\r\n              id=\"password\" name=\"password\"\r\n              className=\"sign__item\"\r\n              maxLength=\"20\" minLength=\"6\"\r\n              placeholder=\"Password\" required\r\n              value={password}\r\n              onChange={handlePasswordChange}\r\n            />\r\n          </label>\r\n\r\n          <button type=\"submit\" className=\"sign__button\">\r\n              Войти\r\n          </button>\r\n\r\n          <p className=\"sign__text\">\r\n            Еще не зарегистрированы?\r\n            <Link to=\"/signup\" className=\"sign__link\"> Регистрация</Link>\r\n          </p>\r\n\r\n        </form>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, {useState} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from '../components/Header';\r\n\r\nconst Register = (props) => {\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if ( !email || !password ) {\r\n      return;\r\n    }\r\n    props.onRegister(email, password, resetForm);\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <Header>\r\n        <Link to=\"/signin\" className=\"nav-menu__link\">Войти</Link>\r\n      </Header>\r\n\r\n      <section className=\"sign\">\r\n        <form\r\n          name=\"form-register\"\r\n          className=\"sign__form\"\r\n          onSubmit={handleSubmit}\r\n        >\r\n          <h3 className=\"sign__heading\">Регистрация</h3>\r\n\r\n          <label>\r\n            <input type=\"email\"\r\n              id=\"email\" name=\"email\"\r\n              className=\"sign__item\"\r\n              maxLength=\"40\" minLength=\"2\"\r\n              placeholder=\"Email\" required\r\n              value={email}\r\n              onChange={handleEmailChange}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            <input type=\"password\"\r\n              id=\"password\" name=\"password\"\r\n              className=\"sign__item\"\r\n              maxLength=\"20\" minLength=\"6\"\r\n              placeholder=\"Password\" required\r\n              value={password}\r\n              onChange={handlePasswordChange}\r\n            />\r\n          </label>\r\n\r\n          <button type=\"submit\" className=\"sign__button\">\r\n              Зарегистрироваться\r\n          </button>\r\n\r\n          <p className=\"sign__text\">\r\n            Уже зарегистрированы?\r\n            <Link to=\"/signin\" className=\"sign__link\"> Войти</Link>\r\n          </p>\r\n\r\n        </form>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport Header from '../components/Header';\r\n\r\nconst NotFound = () => {\r\n  return(\r\n    <div className=\"page\">\r\n      <Header />\r\n      <section className=\"not-found\">\r\n        <h3 className=\"not-found__title\">\r\n          Ошибка 404\r\n        </h3>\r\n        <p className=\"not-found__subtitle\">\r\n          Страница не найдена\r\n        </p>\r\n      </section>\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default NotFound;","import React, {useState, useEffect} from 'react';\r\n\r\nconst InfoToolTip = (props) => {\r\n  const [popupOpenClass, setPopupOpenClass] = useState('');\r\n\r\n  const handleCloseClick = () => {\r\n    setPopupOpenClass('');\r\n    props.onClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPopupOpenClass('popup_opened');\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`popup ${popupOpenClass}`}>\r\n      <div className=\"popup__container\">\r\n\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__btn popup__btn_action_close shaded\"\r\n          title=\"Закрыть форму\"\r\n          onClick={handleCloseClick}\r\n        />\r\n\r\n        <div className=\"popup__message-box\">\r\n          <img\r\n            className=\"popup__message-icon\"\r\n            src={props.imageLink}\r\n            alt={props.textMessage}\r\n          />\r\n          <p className=\"popup__message-text\">\r\n            {props.textMessage}\r\n          </p>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InfoToolTip;\r\n","export default __webpack_public_path__ + \"static/media/reg-success.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/reg-failure.d4ce2a26.svg\";","import React, {useState, useEffect} from 'react';\r\nimport {Switch, Route, Redirect, useHistory} from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport * as auth from '../utils/auth';\r\n\r\nimport HomePage from '../screens/HomePage';\r\nimport Login from '../screens/Login';\r\nimport Register from '../screens/Register';\r\nimport NotFound from '../screens/NotFound';\r\nimport InfoTooltip from '../components/InfoTooltip';\r\n\r\nimport regSuccess from '../images/reg-success.svg';\r\nimport regFailure from '../images/reg-failure.svg';\r\n\r\nconst App = () => {\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n  const [resultMessage, setResultMessage] = useState({ image: null, text: '' });\r\n  const [email, setEmail] = useState('');\r\n\r\n  let history = useHistory();\r\n\r\n  const tokenCheck = () => {\r\n    if (localStorage.getItem('jwt')) {\r\n      const jwt = localStorage.getItem('jwt');\r\n      auth.checkToken(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setEmail(res.data.email);\r\n            setLoggedIn(true);\r\n            history.push('/home');\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log('Переданный токен некорректен.');\r\n          setLoggedIn(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    tokenCheck();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [loggedIn]);\r\n\r\n  const handlePopupClose = () => {\r\n    setIsPopupOpen(false);\r\n  };\r\n\r\n  const handleRegister = (userEmail, userPassword, resetRegisterForm) => {\r\n    let messageText = '', imageLink = null;\r\n\r\n    auth.register(userEmail, userPassword)\r\n      .then((res) => {\r\n        resetRegisterForm();\r\n        history.push('/signin');\r\n        messageText =\"Вы успешно зарегистрировались!\";\r\n        imageLink = regSuccess;\r\n      })\r\n      .catch((err) => {\r\n        switch (err) {\r\n          case 400:\r\n            messageText = \"Ошибка 400, некорректно заполнено одно из полей\";\r\n            imageLink = regFailure;\r\n            break;\r\n          default:\r\n            messageText = \"Что-то пошло не так! Попробуйте ещё раз.\";\r\n            imageLink = regFailure;\r\n        }\r\n          })\r\n      .finally(() => {\r\n        setResultMessage({ image: imageLink, text: messageText });\r\n        console.log(messageText);\r\n        setIsPopupOpen(true);\r\n      });\r\n  };\r\n\r\n  const handleLogin = (userEmail, userPassword, resetLoginForm) => {\r\n\r\n    auth.authorize(userEmail, userPassword)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          localStorage.setItem('jwt', data.token);\r\n          resetLoginForm();\r\n          history.push('/home');\r\n          setLoggedIn(true);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        let messageText = '', imageLink = regFailure;\r\n        switch (err) {\r\n          case 400:\r\n            messageText = \"Ошибка 400, не передано одно из полей\";\r\n            break;\r\n          case 401:\r\n            messageText = `Ошибка 401, пользователь ${userEmail} не найден`;\r\n            break;\r\n          default:\r\n            messageText = \"Что-то пошло не так! Попробуйте ещё раз.\";\r\n        }\r\n        setResultMessage({ image: imageLink, text: messageText });\r\n        console.log(messageText);\r\n        setIsPopupOpen(true);\r\n      });\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('jwt');\r\n    setLoggedIn(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Switch>\r\n        <ProtectedRoute\r\n          path=\"/home\"\r\n          loggedIn={loggedIn}\r\n          component={HomePage}\r\n          onLogout={handleLogout}\r\n          email={email}\r\n        />\r\n\r\n        <Route path=\"/signin\">\r\n          <Login onLogin={handleLogin} history={history} email={email}/>\r\n        </Route>\r\n\r\n        <Route path=\"/signup\">\r\n          <Register onRegister={handleRegister} history={history} />\r\n        </Route>\r\n\r\n        <Route exact path=\"/\">\r\n          {loggedIn ? <Redirect to=\"/home\" /> : <Redirect to=\"/signin\" />}\r\n        </Route>\r\n\r\n        <Route path=\"/react-mesto-auth\">\r\n          {loggedIn ? <Redirect to=\"/home\" /> : <Redirect to=\"/signin\" />}\r\n        </Route>\r\n        <Route path=\"*\">\r\n          <NotFound />\r\n        </Route>\r\n      </Switch>\r\n\r\n      {/* Вывод сообщения о результатах регистрации/авторизации */}\r\n      { isPopupOpen &&\r\n        <InfoTooltip\r\n          onClose={handlePopupClose}\r\n          imageLink={resultMessage.image}\r\n          textMessage={resultMessage.text}\r\n        />\r\n      }\r\n\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}