(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),c=n.n(i),s=n(20),o=n.n(s),r=n(10),l=(n(31),n(2)),u=n(4),d=n(3),j=n(25),p=function(e){var t=e.component,n=Object(j.a)(e,["component"]);return Object(a.jsx)(u.b,{children:function(){return n.loggedIn?Object(a.jsx)(t,Object(d.a)({},n)):Object(a.jsx)(u.a,{to:"./signin"})}})},b="https://auth.nomoreparties.co",m=function(e){return e.ok?e.json():Promise.reject(e.status)},h=n(24),O=c.a.createContext(),f=n.p+"static/media/header-logo.c2821b38.svg",_=function(e){return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("img",{className:"header__logo",src:f,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 Mesto-Russia"}),Object(a.jsx)("nav",{className:"nav-menu",children:e.children})]})};var v=function(e){var t=e.card,n=e.onClick,c=e.onLike,s=e.onDelete,o=Object(i.useContext)(O),r=t.owner===o._id;return Object(a.jsxs)("li",{className:"card",children:[Object(a.jsx)("img",{className:"card__image",src:t.link,alt:t.title,onClick:function(){n(t)}}),Object(a.jsxs)("div",{className:"card__description",children:[Object(a.jsx)("h2",{className:"card__title",children:t.title}),Object(a.jsxs)("div",{className:"card__like-group",children:[Object(a.jsx)("button",{className:"card__btn card__btn_action_like shaded \n              ".concat(t.likes.length>0?"card__btn_clicked":""),onClick:function(){c(t)},title:"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"}),Object(a.jsx)("span",{className:"card__like-num",children:t.likes.length})]})]}),Object(a.jsx)("button",{className:"card__btn card__btn_action_del shaded",disabled:!r,hidden:!r,onClick:function(){s(t)},title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})},g=function(){return Object(a.jsx)("div",{className:"loader"})};var x=function(e){var t=Object(i.useContext)(O);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsx)("div",{className:"profile__avatar",onClick:e.onEditAvatar,children:Object(a.jsx)("img",{src:t.avatar,className:"profile__image",alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})}),Object(a.jsxs)("div",{className:"profile__description",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("button",{className:"profile__btn profile__btn_action_edit shaded",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:e.onEditProfile}),Object(a.jsx)("p",{className:"profile__work",children:t.about})]}),Object(a.jsx)("button",{className:"profile__btn profile__btn_action_add shaded",onClick:e.onAddPlace,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e"})]}),Object(a.jsx)("section",{className:"photo-grid",children:e.isLoading?Object(a.jsx)(g,{}):Object(a.jsx)("ul",{className:"photo-grid__list",children:e.cards.map((function(t){return Object(a.jsx)(v,{card:t,onClick:e.onCardClick,onLike:e.onCardLike,onDelete:e.onCardDelete},t.id)}))})})]})},k=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},N=n(8);var C=function(e){var t=e.isOpen&&"popup_opened",n=e.onClose,c=Object(i.useCallback)((function(e){"Escape"===e.key&&n()}),[n]);return Object(i.useEffect)((function(){e.isOpen?document.addEventListener("keyup",c):document.removeEventListener("keyup",c)}),[e.isOpen,c]),Object(a.jsx)("div",{className:"popup popup_content_".concat(e.name," ").concat(t),onClick:function(e){e.target===e.currentTarget&&n()},children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{type:"button",className:"popup__btn popup__btn_action_close shaded",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0431\u0435\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445",onClick:n}),Object(a.jsxs)("form",{name:e.name,className:"popup__form popup__form_size_".concat(e.size),onSubmit:e.onSubmit,children:[Object(a.jsx)("h3",{className:"popup__heading",children:e.title}),e.children,Object(a.jsx)("button",{type:"submit",value:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",disabled:e.submitDisabled,className:"popup__btn popup__btn_action_submit",children:e.submitName})]})]})})},y="popup__item_type_error",S="popup__error_visible";var w=function(e){var t=Object(i.useContext)(O),n=Object(i.useState)({name:{value:t.name,isValid:!0},info:{value:t.about,isValid:!0}}),c=Object(l.a)(n,2),s=c[0],o=c[1],r=Object(i.useState)({name:{input:"",error:""},info:{input:"",error:""}}),u=Object(l.a)(r,2),j=u[0],p=u[1],b=Object(i.useState)({name:"",info:""}),m=Object(l.a)(b,2),h=m[0],f=m[1];Object(i.useEffect)((function(){e.isOpen?o({name:{value:t.name,isValid:!0},info:{value:t.about,isValid:!0}}):o({name:{value:"",isValid:!1},info:{value:"",isValid:!1}}),p({name:{input:"",error:""},info:{input:"",error:""}})}),[t,e.isOpen]);var _=function(e){var t=e.target,n=t.name,a=t.value,i=t.validity;o(Object(d.a)(Object(d.a)({},s),{},Object(N.a)({},n,{value:a,isValid:i.valid})))},v=function(e){var t=e.target,n=t.name,a=t.value,i=t.validity,c=t.validationMessage;o(Object(d.a)(Object(d.a)({},s),{},Object(N.a)({},n,{value:a,isValid:i.valid}))),f(Object(d.a)(Object(d.a)({},h),{},Object(N.a)({},n,c))),p(Object(d.a)(Object(d.a)({},j),{},Object(N.a)({},n,{input:i.valid?"":y,error:i.valid?"":S})))};return Object(a.jsxs)(C,{name:"profile",size:"l",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitName:e.submitName,submitDisabled:!s.name.isValid||!s.info.isValid,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:s.name.value,info:s.info.value})},children:[Object(a.jsxs)("label",{className:"popup__field",children:[Object(a.jsx)("input",{type:"text",id:"name",name:"name",className:"popup__item popup__item_type_name ".concat(j.name.input),maxLength:"40",minLength:"2",placeholder:"\u0418\u043c\u044f",required:!0,value:s.name.value,onChange:_,onInput:v}),Object(a.jsx)("span",{className:"popup__error ".concat(j.name.error),id:"name-error",children:h.name})]}),Object(a.jsxs)("label",{className:"popup__field",children:[Object(a.jsx)("input",{type:"text",id:"info",name:"info",className:"popup__item popup__item_type_info ".concat(j.info.input),maxLength:"200",minLength:"2",placeholder:"\u041e \u0441\u0435\u0431\u0435",required:!0,value:s.info.value,onChange:_,onInput:v}),Object(a.jsx)("span",{className:"popup__error ".concat(j.info.error),id:"info-error",children:h.info})]})]})};var L=function(e){var t=Object(i.useContext)(O),n=Object(i.useRef)(),c=Object(i.useState)(""),s=Object(l.a)(c,2),o=s[0],r=s[1],u=Object(i.useState)({input:"",error:""}),d=Object(l.a)(u,2),j=d[0],p=d[1],b=Object(i.useState)(!1),m=Object(l.a)(b,2),h=m[0],f=m[1];return Object(i.useEffect)((function(){e.isOpen?(n.current.value=t.avatar,f(!1)):(n.current.value="",f(!0)),r(""),p({input:"",error:""})}),[t,e.isOpen]),Object(a.jsx)(C,{name:"avatar",size:"m",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submitName:e.submitName,submitDisabled:h,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar(n.current.value)},children:Object(a.jsxs)("label",{className:"popup__field",children:[Object(a.jsx)("input",{type:"url",ref:n,id:"avatar",name:"avatar",pattern:"https?://.+",className:"popup__item popup__item_type_name ".concat(j.input),placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onInput:function(e){var t=e.target,n=t.validity,a=t.validationMessage;r(a),p({input:n.valid?"":y,error:n.valid?"":S}),f(!n.valid)}}),Object(a.jsx)("span",{className:"popup__error ".concat(j.error),id:"avatar-error",children:o})]})})};var E=function(e){var t=Object(i.useState)({title:{value:"",isValid:!0},link:{value:"",isValid:!0}}),n=Object(l.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)({title:{input:"",error:""},link:{input:"",error:""}}),r=Object(l.a)(o,2),u=r[0],j=r[1],p=Object(i.useState)({title:"",link:""}),b=Object(l.a)(p,2),m=b[0],h=b[1];Object(i.useEffect)((function(){s({title:{value:"",isValid:!1},link:{value:"",isValid:!1}}),j({title:{input:"",error:""},link:{input:"",error:""}})}),[e.isOpen]);var O=function(e){var t=e.target,n=t.name,a=t.value,i=t.validity;s(Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},n,{value:a,isValid:i.valid})))},f=function(e){var t=e.target,n=t.name,a=t.value,i=t.validity,o=t.validationMessage;s(Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},n,{value:a,isValid:i.valid}))),h(Object(d.a)(Object(d.a)({},m),{},Object(N.a)({},n,o))),j(Object(d.a)(Object(d.a)({},u),{},Object(N.a)({},n,{input:i.valid?"":y,error:i.valid?"":S})))};return Object(a.jsxs)(C,{name:"card",size:"l",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submitName:e.submitName,submitDisabled:!c.title.isValid||!c.link.isValid,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({title:c.title.value,link:c.link.value})},children:[Object(a.jsxs)("label",{className:"popup__field",children:[Object(a.jsx)("input",{type:"text",id:"title",name:"title",maxLength:"30",minLength:"1",className:"popup__item popup__item_type_name ".concat(u.title.input),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,value:c.title.value,onChange:O,onInput:f}),Object(a.jsx)("span",{className:"popup__error ".concat(u.title.error),id:"title-error",children:m.title})]}),Object(a.jsxs)("label",{className:"popup__field",children:[Object(a.jsx)("input",{type:"url",id:"link",name:"link",pattern:"https?://.+",className:"popup__item popup__item_type_info ".concat(u.link.input),placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,value:c.link.value,onChange:O,onInput:f}),Object(a.jsx)("span",{className:"popup__error ".concat(u.link.error),id:"link-error",children:m.link})]})]})};var U=function(e){var t=e.card,n=e.onClose,c=Object(i.useState)(""),s=Object(l.a)(c,2),o=s[0],r=s[1],u=function(){r(""),n()};return Object(i.useEffect)((function(){var e=function(e){"Escape"===e.key&&u()};return document.addEventListener("keyup",e),r("popup_opened"),function(){document.removeEventListener("keyup",e)}}),[]),Object(a.jsx)("div",{className:"popup popup_content_image ".concat(o),onClick:function(e){e.target===e.currentTarget&&u()},children:Object(a.jsxs)("div",{className:"popup__image-box",children:[Object(a.jsx)("button",{type:"button",className:"popup__btn popup__btn_action_close shaded",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430",onClick:u}),Object(a.jsxs)("figure",{className:"popup__figure",children:[Object(a.jsx)("img",{className:"popup__image",src:t.link,alt:t.title}),Object(a.jsx)("figcaption",{className:"popup__image-caption",children:t.title})]})]})})};var P=function(e){return Object(a.jsx)(C,{name:"confirm",size:"s",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitName:e.submitName,submitDisabled:!1,isOpen:e.card,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onConfirm(e.card)}})},V=n(22),D=n(23),T=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(V.a)(this,e),this._baseUrl=n,this._headers=a}return Object(D.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"postNewCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResponse(e)}))}},{key:"patchNewAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResponse(e)}))}},{key:"patchUserProfile",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.info})}).then((function(e){return t._handleResponse(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}},{key:"unlikeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-14",headers:{authorization:"963ba2cb-ffe5-4800-9828-03d0e9a57e68","Content-Type":"application/json"}}),A=n.p+"static/media/profile-avatar.5024594e.jpg",I=[{title:"\u041f\u0435\u0442\u0435\u0440\u0433\u043e\u0444",link:n.p+"static/media/photo-grid-peterhof-4.947a5379.jpg",likes:[],owner:0,id:1},{title:"\u041f\u0435\u0442\u0435\u0440\u0433\u043e\u0444",link:n.p+"static/media/photo-grid-peterhof-3.d5249dfb.jpg",likes:[],owner:0,id:2},{title:"\u041f\u0435\u0442\u0435\u0440\u0433\u043e\u0444",link:n.p+"static/media/photo-grid-peterhof-1.57bdf3c4.jpg",likes:[],owner:0,id:3},{title:"\u041e\u0440\u0430\u043d\u0438\u0435\u043d\u0431\u0430\u0443\u043c",link:n.p+"static/media/photo-grid-oranienbaum-1.48084ea7.jpg",likes:[],owner:0,id:4},{title:"\u041f\u0430\u0440\u043a \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0438\u044f",link:n.p+"static/media/photo-grid-aleksandria.504811f3.jpg",likes:[],owner:0,id:5},{title:"\u041f\u0435\u0442\u0435\u0440\u0433\u043e\u0444",link:n.p+"static/media/photo-grid-peterhof.8dd60d68.jpg",likes:[],owner:0,id:6}];var R=function(e){var t=Object(i.useState)({_id:0,name:"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0430",about:"(\u0431\u0435\u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u0441\u0435\u0442\u044c)",avatar:A}),n=Object(l.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(I),r=Object(l.a)(o,2),u=r[0],j=r[1],p=Object(i.useState)(null),b=Object(l.a)(p,2),m=b[0],f=b[1],v=Object(i.useState)(null),g=Object(l.a)(v,2),N=g[0],C=g[1],y=Object(i.useState)(!1),S=Object(l.a)(y,2),V=S[0],D=S[1],R=Object(i.useState)(!1),q=Object(l.a)(R,2),M=q[0],z=q[1],J=Object(i.useState)(!1),G=Object(l.a)(J,2),B=G[0],H=G[1],F=Object(i.useState)("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),K=Object(l.a)(F,2),Q=K[0],W=K[1],X=Object(i.useState)("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),Y=Object(l.a)(X,2),Z=Y[0],$=Y[1],ee=Object(i.useState)("\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ie=Object(i.useState)("\u0414\u0430"),ce=Object(l.a)(ie,2),se=ce[0],oe=ce[1],re=Object(i.useState)(!1),le=Object(l.a)(re,2),ue=le[0],de=le[1];return Object(i.useEffect)((function(){de(!0),Promise.all([T.getUserInfo(),T.getInitialCards()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];s({_id:n._id,name:n.name,about:n.about,avatar:n.avatar}),j(a.map((function(e){return{title:e.name,link:e.link,likes:e.likes,owner:e.owner._id,id:e._id}})))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445: ".concat(e,"."))})).finally((function(){de(!1)}))}),[]),Object(a.jsx)(O.Provider,{value:c,children:Object(a.jsxs)("div",{className:"page",children:[Object(a.jsxs)(_,{children:[Object(a.jsx)("p",{className:"nav-menu__text nav-menu__text_type_email",children:e.email}),Object(a.jsx)("p",{className:"nav-menu__text",onClick:e.onLogout,children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(a.jsx)(x,{onEditProfile:function(){return D(!0)},onAddPlace:function(){return z(!0)},onEditAvatar:function(){return H(!0)},onCardClick:function(e){return f(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===c._id})),n=t?"\u0443\u0434\u0430\u043b\u0438\u0442\u044c":"\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c";(t?function(e){return T.unlikeCard(e)}:function(e){return T.likeCard(e)})(e.id).then((function(t){var n={title:t.name,link:t.link,likes:t.likes,owner:t.owner._id,id:t._id},a=u.map((function(t){return t.id===e.id?n:t}));j(a)})).catch((function(e){console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e ".concat(n," \u043b\u0430\u0439\u043a. \u041e\u0448\u0438\u0431\u043a\u0430 ").concat(e,"."))}))},onCardDelete:function(e){C(e)},cards:u,isLoading:ue}),Object(a.jsx)(k,{}),m&&Object(a.jsx)(U,{card:m,onClose:function(){return f(null)}}),Object(a.jsx)(w,{submitName:Q,isOpen:V,onUpdateUser:function(e){var t=e.name,n=e.info;W("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),T.patchUserProfile({name:t,info:n}).then((function(e){console.log("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430."),s(Object(d.a)(Object(d.a)({},c),{},{name:e.name,about:e.about})),D(!1)})).catch((function(e){console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435. ".concat(e,"."))})).finally((function(){W("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}))},onClose:function(){return D(!1)}}),Object(a.jsx)(L,{submitName:Z,isOpen:B,onUpdateAvatar:function(e){$("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),T.patchNewAvatar({avatar:e}).then((function(e){s(Object(d.a)(Object(d.a)({},c),{},{avatar:e.avatar})),H(!1)})).catch((function(e){console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435. ".concat(e,"."))})).finally((function(){$("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}))},onClose:function(){return H(!1)}}),Object(a.jsx)(E,{submitName:ne,isOpen:M,onAddPlace:function(e){ae("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),T.postNewCard({name:e.title,link:e.link}).then((function(e){var t={title:e.name,link:e.link,likes:e.likes,owner:e.owner._id,id:e._id};j([t].concat(Object(h.a)(u))),z(!1)})).catch((function(e){console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435. \u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e,"."))})).finally((function(){ae("\u0421\u043e\u0437\u0434\u0430\u0442\u044c")}))},onClose:function(){return z(!1)}}),Object(a.jsx)(P,{submitName:se,card:N,onConfirm:function(e){oe("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435..."),T.deleteCard(e.id).then((function(t){var n=u.filter((function(t){return t.id!==e.id}));j(n),console.log("\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 ".concat(e.id," \u0443\u0434\u0430\u043b\u0435\u043d\u0430.")),C(null)})).catch((function(e){console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443. \u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e,"."))})).finally((function(){oe("\u0414\u0430")}))},onClose:function(){return C(null)}})]})})},q=function(e){var t=Object(i.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(""),u=Object(l.a)(o,2),d=u[0],j=u[1];return Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(_,{children:Object(a.jsx)(r.b,{to:"/signup",className:"nav-menu__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(a.jsx)("section",{className:"sign",children:Object(a.jsxs)("form",{name:"form-login",className:"sign__form",onSubmit:function(t){t.preventDefault(),c&&d&&function(e,t){return fetch("".concat(b,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return m(e)}))}(c,d).then((function(t){t.token&&(localStorage.setItem("jwt",t.token),s(""),j(""),e.onLogin(c),e.history.push("/home"))})).catch((function(t){e.onLogin(c,t)}))},children:[Object(a.jsx)("h3",{className:"sign__heading",children:"\u0412\u0445\u043e\u0434"}),Object(a.jsx)("label",{children:Object(a.jsx)("input",{type:"email",id:"email",name:"email",className:"sign__item",maxLength:"40",minLength:"2",placeholder:"Email",required:!0,value:c,onChange:function(e){s(e.target.value)}})}),Object(a.jsx)("label",{children:Object(a.jsx)("input",{type:"password",id:"password",name:"password",className:"sign__item",maxLength:"20",minLength:"6",placeholder:"Password",required:!0,value:d,onChange:function(e){j(e.target.value)}})}),Object(a.jsx)("button",{type:"submit",className:"sign__button",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(a.jsxs)("p",{className:"sign__text",children:["\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(a.jsx)(r.b,{to:"/signup",className:"sign__link",children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})})]})},M=function(e){var t=Object(i.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(""),u=Object(l.a)(o,2),d=u[0],j=u[1];return Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(_,{children:Object(a.jsx)(r.b,{to:"/signin",className:"nav-menu__link",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(a.jsx)("section",{className:"sign",children:Object(a.jsxs)("form",{name:"form-register",className:"sign__form",onSubmit:function(t){t.preventDefault(),c&&d&&function(e,t){return fetch("".concat(b,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return m(e)}))}(c,d).then((function(t){e.onRegister(201),s(""),j(""),e.history.push("/signin")})).catch((function(t){e.onRegister(t)}))},children:[Object(a.jsx)("h3",{className:"sign__heading",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(a.jsx)("label",{children:Object(a.jsx)("input",{type:"email",id:"email",name:"email",className:"sign__item",maxLength:"40",minLength:"2",placeholder:"Email",required:!0,value:c,onChange:function(e){s(e.target.value)}})}),Object(a.jsx)("label",{children:Object(a.jsx)("input",{type:"password",id:"password",name:"password",className:"sign__item",maxLength:"20",minLength:"6",placeholder:"Password",required:!0,value:d,onChange:function(e){j(e.target.value)}})}),Object(a.jsx)("button",{type:"submit",className:"sign__button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(a.jsxs)("p",{className:"sign__text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(a.jsx)(r.b,{to:"/signin",className:"sign__link",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})})]})},z=function(){return Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(_,{}),Object(a.jsxs)("section",{className:"not-found",children:[Object(a.jsx)("h3",{className:"not-found__title",children:"\u041e\u0448\u0438\u0431\u043a\u0430 404"}),Object(a.jsx)("p",{className:"not-found__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})]})},J=function(e){var t=Object(i.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1];return Object(i.useEffect)((function(){s("popup_opened")}),[]),Object(a.jsx)("div",{className:"popup ".concat(c),children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{type:"button",className:"popup__btn popup__btn_action_close shaded",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",onClick:function(){s(""),e.onClose()}}),Object(a.jsxs)("div",{className:"popup__message-box",children:[Object(a.jsx)("img",{className:"popup__message-icon",src:e.imageLink,alt:e.textMessage}),Object(a.jsx)("p",{className:"popup__message-text",children:e.textMessage})]})]})})},G=n.p+"static/media/reg-success.a9eb6caf.svg",B=n.p+"static/media/reg-failure.d4ce2a26.svg",H=function(){var e=Object(i.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(!1),o=Object(l.a)(s,2),r=o[0],d=o[1],j=Object(i.useState)({image:null,text:""}),h=Object(l.a)(j,2),O=h[0],f=h[1],_=Object(i.useState)(""),v=Object(l.a)(_,2),g=v[0],x=v[1],k=Object(u.g)(),N=function(){if(localStorage.getItem("jwt")){var e=localStorage.getItem("jwt");(t=e,fetch("".concat(b,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return m(e)}))).then((function(e){e&&(c(!0),k.push("/home"))}))}var t};Object(i.useEffect)((function(){N()}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsxs)(u.d,{children:[Object(a.jsx)(p,{path:"/home",loggedIn:n,component:R,onLogout:function(){localStorage.removeItem("jwt"),c(!1)},email:g}),Object(a.jsx)(u.b,{path:"/signin",children:Object(a.jsx)(q,{onLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;if(200===t)c(!0),x(e);else{var n="";switch(t){case 400:n="\u041e\u0448\u0438\u0431\u043a\u0430 400, \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439";break;case 401:n="\u041e\u0448\u0438\u0431\u043a\u0430 401, \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(e," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");break;default:n="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}f({image:B,text:n}),console.log(n),d(!0)}},history:k,email:g})}),Object(a.jsx)(u.b,{path:"/signup",children:Object(a.jsx)(M,{onRegister:function(e){var t="",n=null;switch(e){case 201:t="\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",n=G;break;case 400:t="\u041e\u0448\u0438\u0431\u043a\u0430 400, \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439",n=B;break;default:t="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.",n=B}f({image:n,text:t}),console.log(t),d(!0)},history:k})}),Object(a.jsx)(u.b,{exact:!0,path:"/",children:n?Object(a.jsx)(u.a,{to:"/home"}):Object(a.jsx)(u.a,{to:"/signin"})}),Object(a.jsx)(u.b,{path:"/react-mesto-auth",children:n?Object(a.jsx)(u.a,{to:"/home"}):Object(a.jsx)(u.a,{to:"/signin"})}),Object(a.jsx)(u.b,{path:"*",children:Object(a.jsx)(z,{})})]}),r&&Object(a.jsx)(J,{onClose:function(){d(!1)},imageLink:O.image,textMessage:O.text})]})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(r.a,{children:Object(a.jsx)(H,{})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.daa91d61.chunk.js.map